<div class="dashboard-container">
  <!-- Date Filters -->
  <div class="filters-container">
    <mat-form-field appearance="outline">
      <mat-label>Month and Year</mat-label>
      <input
        matInput
        [matDatepicker]="dp"
        [formControl]="date"
        placeholder="MM/YYYY"
        readonly
      />
      <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
      <mat-datepicker
        #dp
        startView="multi-year"
        (monthSelected)="setMonthAndYear($event, dp)"
        panelClass="example-month-picker"
      ></mat-datepicker>
    </mat-form-field>
  </div>

  <!-- Spinner for loading -->
  <div class="spinner" *ngIf="showSpinner">
    <mat-spinner></mat-spinner>
  </div>

  <!-- KPI Section -->
  <div class="kpi-section">
    <div
      class="kpi-card"
      *ngFor="let kpi of kpis"
      [ngStyle]="{ 'background-color': kpi.color }"
    >
      <div class="kpi-icon">
        <mat-icon>{{ kpi.icon }}</mat-icon>
      </div>
      <h3>{{ kpi.title }}</h3>
      <h2>{{ kpi.value }}</h2>
    </div>
  </div>

  <!-- Chart Section -->
  <div class="charts-section">
    <div class="chart-card" *ngFor="let graph of graphs">
      <h4>{{ graph.title }}</h4>
      <div class="chart-wrapper">
        <canvas
          baseChart
          [data]="graph.data"
          [labels]="graph.labels"
          [options]="chartOptions"
          [type]="'line'"
        ></canvas>
      </div>
    </div>
  </div>

  <!-- Table Section -->
  <div class="table-section">
    <table>
      <thead>
        <tr>
          <th>S.NO</th>
          <th><mat-icon class="header-icon">business</mat-icon> Client Name</th>
          <th>
            <mat-icon class="header-icon">description</mat-icon> Required Youtube
            Videos
          </th>
          <th>
            <mat-icon class="header-icon">brush</mat-icon> Youtube Videos Edited
          </th>
          <th>
            <mat-icon class="header-icon">check_circle</mat-icon> Youtube Videos
            Approved
          </th>
          <th>
            <mat-icon class="header-icon">hourglass_empty</mat-icon> Pending
            Approvals
          </th>
          <th>
            <mat-icon class="header-icon">edit</mat-icon> Changes Recommended
          </th>
          <th>
            <mat-icon class="header-icon">pending</mat-icon> Pending Youtube
            Videos
          </th>
        </tr>
      </thead>
      <tbody>
        <!-- Table Rows -->
        <tr *ngFor="let row of clientWiseData; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ row.organizationName }}</td>
          <td>{{ row.noOfRequiredVideos }}</td>
          <td>{{ row.totalVideosEdited }}</td>
          <td>{{ row.totalVideosApproved }}</td>
          <td>{{ row.totalPendingApprovals }}</td>
          <td>{{ row.totalChangesRecommended }}</td>
          <td>{{ row.totalPendingVideos }}</td>
        </tr>

        <!-- Totals Row -->
        <tr>
          <td colspan="2"><strong>Totals</strong></td>
          <td><strong>{{ totals.noOfRequiredVideos }}</strong></td>
          <td><strong>{{ totals.totalVideosEdited }}</strong></td>
          <td><strong>{{ totals.totalVideosApproved }}</strong></td>
          <td><strong>{{ totals.totalPendingApprovals }}</strong></td>
          <td><strong>{{ totals.totalChangesRecommended }}</strong></td>
          <td><strong>{{ totals.totalPendingVideos }}</strong></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
